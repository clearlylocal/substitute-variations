{"version":3,"sources":["utils/fns.ts","core/expand.ts","utils/qps.ts","pages/Preview.tsx","utils/exceljs.ts","pages/Convert.tsx","utils/formatters.ts","content/instructions.md","utils/dom.ts","utils/utils.ts","pages/Instructions.tsx","utils/react.ts","utils/snarkdown.ts","Routes.tsx","App.tsx","index.tsx","utils/path.ts"],"names":["pipe","init","fns","reduce","val","fn","inputToLines","text","trim","split","map","x","segmentsToLine","segments","join","replace","segmentSplitter","uniq","arr","Set","expand","line","all","acc","cur","idx","arrOfArrs","flatMap","a","expandToAll","expandToSamples","lineSegments","seg","i","out","max","Math","filter","_","length","push","Array","inc","segIdx","flat","qps","deleteProperty","cache","key","url","URL","window","location","href","searchParams","delete","history","replaceState","document","title","qpsProxy","Proxy","Object","setPrototypeOf","get","raw","undefined","JSON","parse","set","stringify","entries","initQps","Preview","useState","input","localStorage","previewInput","setInput","useEffect","useMemo","full","samples","className","rows","cols","value","onChange","currentTarget","onClick","confirm","matchers","disallowedInSheetName","regex","escapedSheetRef","sheetRef","colRef","rowRef","cellRefFullyQualified","cellRefStandalone","rangeRefCellsOnly","rangeRefStandalone","unwrap","toColAndRow","cellRef","match","groups","col","row","Error","Number","selectRange","sheet","range","test","startCellColumn","startRow","endCellColumn","endRow","_endColumn","getColumn","_startColumn","endColumn","number","startColumn","cells","colNum","eachCell","cell","rowNumber","rowNum","getRow","getCell","selectRanges","workbook","delim","forEach","sheetName","getWorksheet","slice","eachSheet","readFile","file","Promise","res","reader","FileReader","onload","e","target","result","readAsArrayBuffer","writeFile","filename","buf","mimeType","blob","Blob","type","link","createElement","createObjectURL","fileName","download","click","expansionTypes","expansionType","ranges","Convert","defaultValues","pipeNullable","getItem","useForm","register","handleSubmit","changeHandler","useCallback","form","setItem","k","v","submitHandler","files","expandFn","alert","data","Excel","Workbook","xlsx","load","eachRow","console","error","writeBuffer","fileNameSansExt","name","date","Date","toISOString","onSubmit","ref","t","renderAnchors","el","defaultVal","slugs","create","querySelectorAll","heading","textContent","slug","toLowerCase","id","Boolean","classList","add","Instructions","callback","html","setHtml","useHistory","fetch","instructionsMdUrl","then","content","m","l","some","ch","startsWith","_snarkdown","getAttribute","setAttribute","process","prependPublicUrlToRelativeLinks","addEventListener","nodeName","preventDefault","origin","open","contains","hash","scrollIntoView","handleLinks","setTimeout","matchedEl","decodeURIComponent","CSS","escape","querySelector","scrollHashIntoView","parentEl","observer","MutationObserver","disconnect","observe","childList","dangerouslySetInnerHTML","__html","Routes","exact","path","App","basename","activeClassName","to","joinPath","ts","info","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a2db2d0d.chunk.js","sourcesContent":["export function pipe<A>(a: A): A\nexport function pipe<A, B>(a: A, ab: (a: A) => B): B\nexport function pipe<A, B, C>(a: A, ab: (a: A) => B, bc: (b: B) => C): C\nexport function pipe<A, B, C, D>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n): D\nexport function pipe<A, B, C, D, E>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n\tde: (d: D) => E,\n): E\nexport function pipe<A, B, C, D, E, F>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n\tde: (d: D) => E,\n\tef: (e: E) => F,\n): F\nexport function pipe(init: any, ...fns: any[]) {\n\treturn fns.reduce((val, fn) => fn(val), init)\n}\n\nexport function pipeNullable<A>(a: A): A\nexport function pipeNullable<A, B>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n): NonNullable<B>\nexport function pipeNullable<A, B, C>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n): NonNullable<C>\nexport function pipeNullable<A, B, C, D>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n): NonNullable<D>\nexport function pipeNullable<A, B, C, D, E>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n\tde: (d: NonNullable<D>) => E,\n): NonNullable<E>\nexport function pipeNullable<A, B, C, D, E, F>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n\tde: (d: NonNullable<D>) => E,\n\tef: (e: NonNullable<E>) => F,\n): NonNullable<F>\nexport function pipeNullable(init: any, ...fns: any[]) {\n\treturn fns.reduce((val, fn) => (val == null ? val : fn(val)), init)\n}\n\nexport const permute = <T>(arr: T[]) => (arrOfArrs: T[][]) =>\n\tarr.flatMap((x) => arrOfArrs.map((a) => [...a, x]))\n","import { pipe, permute } from '../utils/fns'\n\nconst inputToLines = (text: string) =>\n\ttext\n\t\t.trim()\n\t\t.split('\\n')\n\t\t.map((x) => x.trim())\n\nconst segmentsToLine = (segments: string[]) =>\n\tsegments\n\t\t.join('')\n\t\t.replace(/ +/g, ' ')\n\t\t.replace(/ ([.,?!;:])/g, '$1')\n\t\t.trim()\n\nconst segmentSplitter = /\\[([^\\]]+)\\]/\n\nconst uniq = <T>(arr: T[]) => [...new Set(arr)]\n\nconst expand = (line: string) => {\n\tconst split = line.split(segmentSplitter)\n\n\tconst all = split\n\t\t.reduce(\n\t\t\t(acc, cur, idx) => {\n\t\t\t\treturn idx % 2 === 0\n\t\t\t\t\t? acc.map((x) => [...x, cur])\n\t\t\t\t\t: pipe(acc, permute(cur.split('/')))\n\t\t\t},\n\t\t\t[['']],\n\t\t)\n\t\t.map(segmentsToLine)\n\n\treturn uniq(all)\n}\n\nexport const expandToAll = (text: string) =>\n\tinputToLines(text).flatMap((line) => uniq(expand(line)))\n\nexport const expandToSamples = (text: string) => {\n\tconst lineSegments = inputToLines(text).map((line) =>\n\t\tline\n\t\t\t.split(segmentSplitter)\n\t\t\t.map((seg, i) => (i % 2 ? seg.split('/') : seg)),\n\t)\n\n\tconst out: string[][] = []\n\n\tfor (const line of lineSegments) {\n\t\tconst max = Math.max(\n\t\t\t1, // at least one - if no [alternatives/] in a line\n\t\t\t...line.filter((_, i) => i % 2).map((x) => x.length),\n\t\t)\n\n\t\tout.push(\n\t\t\t[...new Array(max)]\n\t\t\t\t.map((_, i) => i)\n\t\t\t\t.map((inc) =>\n\t\t\t\t\tline.map((seg, segIdx) =>\n\t\t\t\t\t\tsegIdx % 2 ? seg[inc % seg.length] : seg,\n\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t\t.map(\n\t\t\t\t\tsegmentsToLine as (\n\t\t\t\t\t\t...args: any[]\n\t\t\t\t\t) => ReturnType<typeof segmentsToLine>,\n\t\t\t\t),\n\t\t)\n\t}\n\n\treturn uniq(out.flat())\n}\n","import { JsonSerializable } from '../types'\n\ntype Key<T> = string & keyof T\n\nconst initQps = <T extends Record<string, JsonSerializable>>(init?: T) => {\n\tconst deleteProperty = (cache: Partial<T>, key: Key<T>) => {\n\t\tconst url = new URL(window.location.href)\n\n\t\turl.searchParams.delete(key)\n\t\tdelete cache[key]\n\n\t\twindow.history.replaceState({}, document.title, url.href)\n\n\t\treturn true\n\t}\n\n\tconst get = (cache: Partial<T>, key: Key<T>) => {\n\t\tif (key in cache) {\n\t\t\treturn cache[key]\n\t\t}\n\n\t\tconst url = new URL(window.location.href)\n\n\t\tconst raw = url.searchParams.get(key)\n\n\t\treturn raw == null ? undefined : JSON.parse(raw)\n\t}\n\n\tconst set = (cache: Partial<T>, key: Key<T>, val: T[typeof key]) => {\n\t\tconst url = new URL(window.location.href)\n\n\t\tif (typeof val === 'undefined') {\n\t\t\treturn deleteProperty(cache, key)\n\t\t}\n\n\t\turl.searchParams.set(key, JSON.stringify(val))\n\t\tcache[key] = val\n\n\t\twindow.history.replaceState({}, document.title, url.href)\n\n\t\treturn true\n\t}\n\n\tconst qpsProxy = new Proxy(\n\t\tObject.setPrototypeOf({ ...init }, null) as Partial<T>,\n\t\t{\n\t\t\tget,\n\t\t\tset,\n\t\t\tdeleteProperty,\n\t\t},\n\t)\n\n\tfor (const [key, val] of Object.entries(init ?? {})) {\n\t\tqpsProxy[key as Key<T>] = val as T[typeof key]\n\t}\n\n\treturn qpsProxy\n}\n\nexport const qps = initQps<{\n\tinput: string\n}>()\n","import { FC, useEffect, useMemo, useState } from 'react'\nimport { expandToSamples, expandToAll } from '../core/expand'\nimport { qps } from '../utils/qps'\n\nconst init = `[Turn on/Switch on/Enable/Activate] [the/] driver['s seat/] fan [mode/].\n[Turn/Switch] [the/] driver['s seat/] fan on.`\n\nexport const Preview: FC = () => {\n\tconst [input, setInput] = useState(\n\t\tqps.input ?? localStorage.previewInput ?? init,\n\t)\n\n\tuseEffect(() => {\n\t\tif (input === init) {\n\t\t\tdelete qps.input\n\t\t\tdelete localStorage.previewInput\n\t\t} else {\n\t\t\tqps.input = localStorage.previewInput = input\n\t\t}\n\t}, [input])\n\n\tconst [full, samples] = useMemo(\n\t\t() =>\n\t\t\t[expandToAll(input), expandToSamples(input)].map((x) =>\n\t\t\t\tx.join('\\n'),\n\t\t\t),\n\t\t[input],\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<h1>Preview</h1>\n\t\t\t\t<textarea\n\t\t\t\t\tclassName='spaced'\n\t\t\t\t\trows={5}\n\t\t\t\t\tcols={70}\n\t\t\t\t\tvalue={input}\n\t\t\t\t\tonChange={({ currentTarget: { value } }) => {\n\t\t\t\t\t\tsetInput(value)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclassName='button primary'\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (window.confirm('Reset input to default example?')) {\n\t\t\t\t\t\t\tsetInput(init)\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tReset\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<h2>Sample variations</h2>\n\t\t\t\t<div className='pre-wrap'>{samples}</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<h2>Full list</h2>\n\t\t\t\t<div className='pre-wrap'>{full}</div>\n\t\t\t</div>\n\t\t</>\n\t)\n}\n","import Excel from 'exceljs'\nimport { regex, unwrap } from 'fancy-regex'\n\nconst matchers = (() => {\n\tconst disallowedInSheetName = regex`\n\t\t[^\n\t\t\t:\\\\/?*\\[\\]    # disallowed\n\t\t\t\\x00-\\x1f\\x7f # control chars\n\t\t\t'!:,          # delimiters\n\t\t]\n\t`\n\n\tconst escapedSheetRef = regex`'${disallowedInSheetName}+'`\n\n\tconst sheetRef = regex`\n\t\t${disallowedInSheetName}+\n\t\t| ${escapedSheetRef}\n\t`\n\n\tconst colRef = regex`[a-zA-Z]+`\n\tconst rowRef = regex`\\d+`\n\n\tconst cellRefFullyQualified = regex`\n\t\t(?:${colRef})\n\t\t(?:${rowRef})\n\t`\n\n\tconst cellRefStandalone = regex`\n\t\t^\n\t\t\t(?<col>${colRef})\n\t\t\t(?<row>${rowRef})?\n\t\t$\n\t`\n\n\tconst rangeRefCellsOnly = regex`\n\t\t^\n\t\t\t(?:${cellRefFullyQualified}:${cellRefFullyQualified})\n\t\t\t| (?:${colRef}:${colRef})\n\t\t$\n\t`\n\n\tconst rangeRefStandalone = regex`\n\t\t(?:\n\t\t\t(?<sheet>${sheetRef})\n\t\t\t!\n\t\t)?\n\t\t(?<cells>\n\t\t\t${unwrap(rangeRefCellsOnly)}\n\t\t)\n\t`\n\n\treturn {\n\t\tcellRefStandalone,\n\t\trangeRefStandalone,\n\t\trangeRefCellsOnly,\n\t\tescapedSheetRef,\n\t}\n})()\n\nconst toColAndRow = (cellRef: string) => {\n\tconst { col, row } = cellRef.match(matchers.cellRefStandalone)?.groups ?? {}\n\n\tif (!col) {\n\t\tthrow new Error('Invalid cell reference')\n\t}\n\n\treturn [col, row ? Number(row) : -1] as const\n}\n\n// modified from https://github.com/exceljs/exceljs/issues/416#issuecomment-565097379\nexport const selectRange = (sheet: Excel.Worksheet, range: string) => {\n\tconst matches = matchers.rangeRefCellsOnly.test(range)\n\n\tif (!matches) throw new Error('Invalid range')\n\n\tconst [startCell, endCell] = range.split(':', 2)\n\n\tconst [[startCellColumn, startRow], [endCellColumn, endRow]] = [\n\t\tstartCell,\n\t\tendCell,\n\t].map(toColAndRow)\n\n\tif (startRow * endRow < 0 /* only one is -1 */)\n\t\tthrow new Error('Invalid range')\n\n\tlet _endColumn = sheet.getColumn(endCellColumn)\n\tlet _startColumn = sheet.getColumn(startCellColumn)\n\n\tif (!_endColumn) throw new Error('End column not found')\n\tif (!_startColumn) throw new Error('Start column not found')\n\n\tconst endColumn = _endColumn.number\n\tconst startColumn = _startColumn.number\n\n\tconst cells: Excel.Cell[][] = []\n\n\tif (startRow === -1) {\n\t\tfor (let colNum = startColumn; colNum <= endColumn; colNum++) {\n\t\t\tsheet.getColumn(colNum).eachCell((cell, rowNumber) => {\n\t\t\t\tcells[rowNumber - 1] ??= []\n\n\t\t\t\tcells[rowNumber - 1].push(cell)\n\t\t\t})\n\t\t}\n\t} else {\n\t\tfor (let rowNum = startRow; rowNum <= endRow; rowNum++) {\n\t\t\tconst row = sheet.getRow(rowNum)\n\n\t\t\tcells.push([])\n\n\t\t\tfor (let colNum = startColumn; colNum <= endColumn; colNum++) {\n\t\t\t\tcells[cells.length - 1].push(row.getCell(colNum))\n\t\t\t}\n\t\t}\n\t}\n\n\treturn cells\n}\n\nexport const selectRanges = (\n\tworkbook: Excel.Workbook,\n\trange: string,\n\tdelim: string | RegExp = ',',\n) => {\n\tconst out: Excel.Cell[][][] = []\n\n\trange\n\t\t.split(delim)\n\t\t.map((x) => x.trim())\n\t\t.forEach((x) => {\n\t\t\tconst { sheet: sheetName, cells } =\n\t\t\t\tx.match(matchers.rangeRefStandalone)?.groups ?? {}\n\n\t\t\tif (sheetName) {\n\t\t\t\tconst sheet = workbook.getWorksheet(\n\t\t\t\t\tmatchers.escapedSheetRef.test(sheetName)\n\t\t\t\t\t\t? sheetName.slice(1, -1)\n\t\t\t\t\t\t: sheetName,\n\t\t\t\t)\n\n\t\t\t\tif (sheet) out.push(selectRange(sheet, cells))\n\t\t\t} else {\n\t\t\t\tworkbook.eachSheet((sheet) =>\n\t\t\t\t\tout.push(selectRange(sheet, cells)),\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\n\treturn out\n}\n","import { FC, useCallback, useMemo } from 'react'\nimport { useForm } from 'react-hook-form'\nimport Excel from 'exceljs'\nimport { expandToAll, expandToSamples } from '../core/expand'\nimport { pipeNullable } from '../utils/fns'\nimport { selectRanges } from '../utils/exceljs'\nimport { filenameify } from '../utils/formatters'\n\nexport const readFile = (file: File) =>\n\tnew Promise<ArrayBuffer>((res) => {\n\t\tconst reader = new FileReader()\n\n\t\treader.onload = (e) => res(e.target!.result as ArrayBuffer)\n\n\t\treader.readAsArrayBuffer(file)\n\t})\n\nexport const writeFile = (\n\tfilename: string,\n\tbuf: BlobPart,\n\tmimeType: string,\n) => {\n\tconst blob = new Blob([buf], {\n\t\ttype: mimeType,\n\t})\n\n\tconst link = document.createElement('a')\n\n\tlink.href = window.URL.createObjectURL(blob)\n\n\tconst fileName = filename\n\n\tlink.download = fileName\n\tlink.click()\n}\n\nconst expansionTypes = ['full', 'samples'] as const\n\ntype FormVals = {\n\tfiles?: FileList\n\texpansionType: typeof expansionTypes[number]\n\tranges: string\n}\n\nconst init: FormVals = {\n\texpansionType: 'full',\n\tranges: '*',\n}\n\nexport const Convert: FC = () => {\n\tconst defaultValues: FormVals = useMemo(\n\t\t() =>\n\t\t\tpipeNullable(localStorage.getItem('convertForm'), JSON.parse) ??\n\t\t\tinit,\n\t\t[],\n\t)\n\n\tconst { register, handleSubmit } = useForm<FormVals>({\n\t\tdefaultValues,\n\t})\n\n\tconst changeHandler = useCallback((form: FormVals) => {\n\t\tlocalStorage.setItem(\n\t\t\t'convertForm',\n\t\t\tJSON.stringify(form, (k, v) =>\n\t\t\t\t(k as keyof FormVals) === 'files' ? undefined : v,\n\t\t\t),\n\t\t)\n\t}, [])\n\n\tconst submitHandler = useCallback(async (form: FormVals) => {\n\t\tconst { files, expansionType } = form\n\n\t\tconst expandFn =\n\t\t\texpansionType === 'samples' ? expandToSamples : expandToAll\n\n\t\tif (!files?.length) {\n\t\t\twindow.alert('No file selected')\n\n\t\t\treturn\n\t\t}\n\n\t\tconst file = files[0]\n\t\tconst data = await readFile(file)\n\n\t\tconst workbook = new Excel.Workbook()\n\n\t\tawait workbook.xlsx.load(data)\n\n\t\tconst ranges = form.ranges.trim()\n\n\t\tif (ranges === '*') {\n\t\t\tworkbook.eachSheet((sheet) => {\n\t\t\t\tsheet.eachRow((row) => {\n\t\t\t\t\trow.eachCell((cell) => {\n\t\t\t\t\t\tif (typeof cell.value === 'string')\n\t\t\t\t\t\t\tcell.value = expandFn(cell.value).join('\\n')\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tfor (const cell of selectRanges(workbook, ranges, /[,\\n]/).flat(\n\t\t\t\t\t2,\n\t\t\t\t)) {\n\t\t\t\t\tif (typeof cell.value === 'string')\n\t\t\t\t\t\tcell.value = expandFn(cell.value).join('\\n')\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\twindow.alert('Invalid ranges')\n\t\t\t\tconsole.error(e)\n\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tconst buf = await workbook.xlsx.writeBuffer()\n\n\t\tconst fileNameSansExt = [\n\t\t\t`${file.name.split('.').slice(0, -1).join('.')}`,\n\t\t\t'expanded',\n\t\t\texpansionType,\n\t\t\tfilenameify(new Date()),\n\t\t].join('_')\n\n\t\twriteFile(\n\t\t\t`${fileNameSansExt}.xlsx`,\n\t\t\tbuf,\n\t\t\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n\t\t)\n\t}, [])\n\n\treturn (\n\t\t<form\n\t\t\tonSubmit={handleSubmit(submitHandler)}\n\t\t\tonChange={handleSubmit(changeHandler)}\n\t\t>\n\t\t\t<h1>Convert</h1>\n\t\t\t<div className='spaced'>\n\t\t\t\t<label>\n\t\t\t\t\tUpload file (XLSX)\n\t\t\t\t\t<input type='file' name='files' ref={register} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div className='spaced'>\n\t\t\t\t<label>\n\t\t\t\t\tExpansion type\n\t\t\t\t\t<select name='expansionType' ref={register}>\n\t\t\t\t\t\t{expansionTypes.map((t) => (\n\t\t\t\t\t\t\t<option key={t} value={t}>\n\t\t\t\t\t\t\t\t{t}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div className='spaced'>\n\t\t\t\t<label>\n\t\t\t\t\tRanges to include (* = all; comma/newline delimited)\n\t\t\t\t\t<textarea name='ranges' ref={register} />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div className='spaced'>\n\t\t\t\t<button type='submit'>Convert</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n","import { regex } from 'fancy-regex'\n\nexport const slugify = (str: string) =>\n\tstr\n\t\t.toLowerCase()\n\t\t.replace(\n\t\t\tregex('gu')`[\n\t\t\t\t^\n\t\t\t\t\\p{Letter}\n\t\t\t\t\\p{Mark}\n\t\t\t\t\\p{Number}\n\t\t\t]+`,\n\t\t\t' ',\n\t\t)\n\t\t.trim()\n\t\t.replace(/\\s+/g, '-')\n\nexport const filenameify = (date: Date) =>\n\tdate.toISOString().replace(/:/g, '_').slice(0, 19) + 'Z'\n","export default __webpack_public_path__ + \"static/media/instructions.91848c3b.md\";","import { useHistory } from 'react-router-dom'\nimport { pipe } from './fns'\nimport { slugify } from './formatters'\nimport { hashWithDefault } from './utils'\n\nexport const renderAnchors = (el: HTMLElement) => {\n\tconst slugs = hashWithDefault(0)\n\n\tfor (const heading of el.querySelectorAll(\n\t\t'h2, h3, h4, h5, h6, .anchored',\n\t)) {\n\t\tif (heading.textContent) {\n\t\t\tconst slug = slugify(heading.textContent) || 'heading'\n\n\t\t\tconst x = ++slugs[slug]\n\n\t\t\theading.id = [slug, x > 1 && x].filter(Boolean).join('-')\n\t\t\theading.classList.add('anchored')\n\t\t}\n\t}\n}\n\nexport const prependPublicUrlToRelativeLinks = (el: HTMLElement) => {\n\tfor (const link of el.querySelectorAll('a')) {\n\t\tconst href = link.getAttribute('href')\n\n\t\tif (href?.startsWith('/')) {\n\t\t\tlink.setAttribute('href', process.env.PUBLIC_URL + href)\n\t\t}\n\t}\n}\n\nexport const handleLinks = (\n\tel: HTMLElement,\n\thistory: ReturnType<typeof useHistory>,\n) => {\n\tel.addEventListener('click', (e) => {\n\t\tconst target = e.target as HTMLAnchorElement\n\t\tconst href = target.getAttribute('href')\n\n\t\tif (target.nodeName === 'A' && href) {\n\t\t\te.preventDefault()\n\n\t\t\tif (\n\t\t\t\thref.startsWith('http') &&\n\t\t\t\t!href.startsWith(window.location.origin)\n\t\t\t) {\n\t\t\t\twindow.open(href, '_blank', 'noopener noreferrer')\n\t\t\t} else {\n\t\t\t\thistory.push(href.slice(process.env.PUBLIC_URL.length))\n\t\t\t}\n\t\t} else if (target.classList.contains('anchored')) {\n\t\t\twindow.location.hash = target.id\n\t\t\ttarget.scrollIntoView(true)\n\t\t}\n\t})\n}\n\nexport const scrollHashIntoView = (el: HTMLElement) => {\n\tif (window.location.hash) {\n\t\tsetTimeout(() => {\n\t\t\tconst matchedEl = pipe(\n\t\t\t\twindow.location.hash.slice(1),\n\t\t\t\tdecodeURIComponent,\n\t\t\t\tCSS.escape,\n\t\t\t\t(id) => el.querySelector(`#${id}`),\n\t\t\t)\n\n\t\t\tmatchedEl?.scrollIntoView(true)\n\t\t\t// 100ms to counteract browser position retaining\n\t\t}, 100)\n\t}\n}\n","export const hashWithDefault = <T>(defaultVal: T) =>\n\tnew Proxy(Object.create(null) as Record<string, T>, {\n\t\tget(target, key: string) {\n\t\t\treturn key in target ? target[key] : defaultVal\n\t\t},\n\t})\n","import { FC, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport instructionsMdUrl from '../content/instructions.md'\nimport {\n\thandleLinks,\n\tprependPublicUrlToRelativeLinks,\n\trenderAnchors,\n\tscrollHashIntoView,\n} from '../utils/dom'\nimport { onHtmlRender } from '../utils/react'\nimport { snarkdown } from '../utils/snarkdown'\n\nexport const Instructions: FC = () => {\n\tconst [html, setHtml] = useState('')\n\n\tconst history = useHistory()\n\n\tuseEffect(() => {\n\t\tfetch(instructionsMdUrl, { cache: 'force-cache' }).then(async (res) => {\n\t\t\tconst content = await res.text()\n\n\t\t\tconst html = snarkdown(content)\n\n\t\t\tsetHtml(html)\n\t\t})\n\t}, [])\n\n\treturn (\n\t\t<div\n\t\t\tref={onHtmlRender((el) => {\n\t\t\t\t// setup\n\t\t\t\trenderAnchors(el)\n\t\t\t\tprependPublicUrlToRelativeLinks(el)\n\t\t\t\thandleLinks(el, history)\n\n\t\t\t\t// effects\n\t\t\t\tscrollHashIntoView(el)\n\t\t\t})}\n\t\t\tdangerouslySetInnerHTML={{ __html: html }}\n\t\t/>\n\t)\n}\n","export const onHtmlRender = (callback: (parentEl: HTMLElement) => void) => (\n\tparentEl: HTMLElement | null,\n) => {\n\tif (!parentEl) return\n\n\tconst observer = new MutationObserver((m) => {\n\t\tcallback(parentEl)\n\n\t\tobserver.disconnect()\n\t})\n\n\tobserver.observe(parentEl, { childList: true })\n}\n","import { default as _snarkdown } from 'snarkdown'\n\nexport const snarkdown = (md: string) => {\n\tconst html = md\n\t\t.split(/((?<=^|\\n)```\\r?\\n[\\s\\S]*?\\r?\\n```)/)\n\t\t.map((m, i) =>\n\t\t\ti % 2\n\t\t\t\t? `<pre><code>${m\n\t\t\t\t\t\t.split(/\\r?\\n/)\n\t\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t\t.join('\\n')}</pre></code>`\n\t\t\t\t: m\n\t\t\t\t\t\t.split(/(?:\\r?\\n){2,}/)\n\t\t\t\t\t\t.map((l) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t' ',\n\t\t\t\t\t\t\t\t\t'\\t',\n\t\t\t\t\t\t\t\t\t'#',\n\t\t\t\t\t\t\t\t\t'-',\n\t\t\t\t\t\t\t\t\t'*',\n\t\t\t\t\t\t\t\t\t'`',\n\t\t\t\t\t\t\t\t\t'~',\n\t\t\t\t\t\t\t\t].some((ch) => l.startsWith(ch))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn /^\\s*-{3,}\\s*$/.test(l)\n\t\t\t\t\t\t\t\t\t? `<hr>`\n\t\t\t\t\t\t\t\t\t: _snarkdown(l)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn `<p>${_snarkdown(l)}</p>`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(''),\n\t\t)\n\t\t.join('')\n\t\t.replace(/<p><\\/p>/g, '')\n\n\treturn html\n}\n","import { FC } from 'react'\nimport { Preview } from './pages/Preview'\nimport { Switch, Route } from 'react-router-dom'\nimport { Convert } from './pages/Convert'\nimport { Instructions } from './pages/Instructions'\n\nexport const Routes: FC = () => {\n\treturn (\n\t\t<Switch>\n\t\t\t<Route exact path='/'>\n\t\t\t\t<Preview />\n\t\t\t</Route>\n\t\t\t<Route path='/convert'>\n\t\t\t\t<Convert />\n\t\t\t</Route>\n\t\t\t<Route path='/instructions'>\n\t\t\t\t<Instructions />\n\t\t\t</Route>\n\t\t</Switch>\n\t)\n}\n","import { FC } from 'react'\nimport { BrowserRouter as Router, NavLink } from 'react-router-dom'\nimport { Routes } from './Routes'\n\nexport const App: FC = () => {\n\treturn (\n\t\t<>\n\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t<nav className='tabs'>\n\t\t\t\t\t<NavLink exact activeClassName='active' to='/'>\n\t\t\t\t\t\tPreview\n\t\t\t\t\t</NavLink>\n\t\t\t\t\t<NavLink activeClassName='active' to='/convert'>\n\t\t\t\t\t\tConvert\n\t\t\t\t\t</NavLink>\n\t\t\t\t\t<NavLink activeClassName='active' to='/instructions'>\n\t\t\t\t\t\tInstructions\n\t\t\t\t\t</NavLink>\n\t\t\t\t</nav>\n\t\t\t\t<main className='container'>\n\t\t\t\t\t<Routes />\n\t\t\t\t</main>\n\t\t\t</Router>\n\t\t</>\n\t)\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'chota/dist/chota.css' // can't use .min.css due to CRA transpiling bug\nimport './styles/index.css'\nimport { App } from './App'\nimport { joinPath } from './utils/path'\n\nfetch(joinPath('build-timestamp.txt')).then(async (res) => {\n\tconst ts = await res.text()\n\n\tconsole.info('App last built', new Date(Number(ts)))\n})\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n","import { join } from 'path'\n\nexport const joinPath = (...segments: string[]) =>\n\tjoin(process.env.PUBLIC_URL, ...segments.flat())\n"],"sourceRoot":""}